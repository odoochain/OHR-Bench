[
    {
        "text": "Proof. Let us start with the $L^{p}$ case, $p<+\\infty$. There holds  \n\n$$\n\\begin{array}{l}{{\\displaystyle\\|u-T_{k}(u)\\|_{L^{p}(\\Omega)}^{p}=\\int_{\\{u<-k\\}}|u+k|^{p}\\,d x+\\int_{\\{u>k\\}}|u-k|^{p}\\,d x}}\\\\ {{\\displaystyle\\qquad\\qquad\\leq\\int_{\\{u<-k\\}}|u|^{p}\\,d x+\\int_{\\{u>k\\}}|u|^{p}\\,d x}}\\\\ {{\\displaystyle\\qquad\\qquad=\\int_{\\Omega}|u|^{p}\\mathbf{1}_{|u|>k}\\,d x\\,\\longrightarrow0}}\\end{array}\n$$  \n\nwhen $k \\to +\\infty$ by monotone convergence. Concerning gradients, if $u$ is in $W^{1,p}(\\Omega)$, we similarly have  \n\n$$\n\\|\\nabla u-\\nabla(T_{k}(u))\\|_{L^{p}(\\Omega)}^{p}=\\int_{\\Omega}|1-T_{k}^{\\prime}(u)|^{p}|\\nabla u|^{p}\\,d x=\\int_{\\Omega}|\\nabla u|^{p}\\mathbf{1}_{|u|>k}\\,d x\\,\\longrightarrow\\,0,\n$$  \n\nwhen $k \\to +\\infty$.  \n\nFinally, when $p=+\\infty, \\, T_{k}(u)=u$ as soon as $k\\geq\\|u\\|_{L^{\\infty}(\\Omega)}$.  \n\nRemark 3.10. i) In all cases, there holds $T_{k}(u)\\in L^{\\infty}(\\Omega)$ with $\\|T_{k}(u)\\|_{L^{\\infty}(\\Omega)}\\leq k$. ii) If $u\\in W_{0}^{1,p}(\\Omega)$ then $T_{k}(u)\\in W_{0}^{1,p}(\\Omega)$ since $T_{k}(0)=0$.  \n\nWe conclude this general study with a few remarks.  \n\nRemark 3.11. i) The superposition operators do not in general operate on Sobolev spaces of order higher than 1. Thus, for example, if $u\\in H^{2}(\\Omega)$, it is not necessarily the case that $u_{+} \\in H^{2}(\\Omega)$. This is obvious in one dimension of space, since $H^{2}(\\Omega) \\hookrightarrow C^{1}(\\bar{\\Omega})$ in this case. The problem, however, is not only connected to a lack of regularity of the function $T$. Thus, even if $T$ is of class $C^{\\infty}$ with $T^{\\prime}$ and $T^{\\prime\\prime}$ bounded, and $u\\in C^{\\infty}(\\Omega)\\cap H^{2}(\\Omega)$, we do not always have $T(u)\\in H^{2}(\\Omega)$.  \n\nIn effect, by the classical chain rule, $\\partial_{i}(T(u)) = T^{\\prime}(u)\\partial_{i}u$ and $\\partial_{i j}(T(u)) = T^{\\prime\\prime}(u)\\partial_{i}u\\partial_{j}u+T^{\\prime}(u)\\partial_{i j}u$. The second term in the expression of second derivatives actually belongs to $L^{2}(\\Omega)$. However, for the first term, in general $\\partial_{i}u \\partial_{j}u \\not\\in L^{2}(\\Omega)$ (except when $d\\leq 4$ by the Sobolev embeddings). Let us mention a more general result in this direction: if $T$ is $C^{\\infty}$, then for real $s$, if $u \\in W^{s,p}(\\Omega)$, then $T(u) \\in W^{s,p}(\\Omega)$ as soon as $s - \\frac{d}{p} > 0$, see for example [51].  \n\nii) The vector-valued case is comparable to the scalar case. If $T\\colon\\mathbb{R}^{m} \\rightarrow \\mathbb{R}$ is globally Lipschitz, then for all $u \\in W^{1,p}(\\Omega;\\mathbb{R}^{m}), \\, T(u) \\in W^{1,p}(\\Omega)$. On the other hand, the chain rule formula is not valid as such, because $D T(u)\\nabla u$ makes no sense in general. Consider, for example, for $m=2$, $T(u_{1},u_{2})=\\operatorname*{max}(u_{1},u_{2})$. If $u \\in H^{1}(\\Omega;\\mathbb{R}^{2})$ is of the form $u=(v,v)$ with $\\boldsymbol{v}\\in H^{1}(\\Omega)$, then $D T(u)$ is nowhere defined on $\\Omega$ whereas $\\nabla u$ is not zero almost everywhere on $\\Omega$. So we would be hard pressed to give a reasonable definition of such a product as $D T(u)\\nabla u$. There are, however, more complicated formulas to describe this gradient.",
        "page_idx": 0
    }
]